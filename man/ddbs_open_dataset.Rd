% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ddbs_open_dataset.R
\name{ddbs_open_dataset}
\alias{ddbs_open_dataset}
\title{Open spatial dataset lazily via DuckDB}
\usage{
ddbs_open_dataset(
  path,
  crs = NULL,
  layer = NULL,
  geom_col = "geom",
  conn = NULL,
  spatial_filter = NULL,
  spatial_filter_box = NULL
)
}
\arguments{
\item{path}{Path to spatial file. Supports GeoJSON, GeoPackage, Shapefile,
FlatGeoBuf, and other GDAL-supported formats.}

\item{crs}{Coordinate reference system. Can be an EPSG code (e.g., 4326),
a CRS string, or an \code{sf} crs object. If \code{NULL} (default),
attempts to auto-detect from the file using DuckDB's ST_Read_Meta.}

\item{layer}{Layer name or index to read. Default is NULL (first layer).}

\item{geom_col}{Name of the geometry column. Default is \code{"geom"} which
is what DuckDB's ST_Read returns.}

\item{conn}{DuckDB connection to use. If NULL, uses the default connection.}

\item{spatial_filter}{Optional WKB geometry to filter spatially.}

\item{spatial_filter_box}{Optional bounding box (as BOX_2D) to filter spatially.}
}
\value{
A \code{duckspatial_df} object - a lazy spatial data frame backed
by DuckDB via dbplyr.
}
\description{
Reads spatial data directly from disk using DuckDB's spatial extension
and returns a \code{duckspatial_df} object for lazy processing.
}
\details{
This function uses DuckDB's native \code{ST_Read} function to read spatial
data directly, bypassing the need for the sf package to load data. CRS is
automatically detected from the file metadata using \code{ST_Read_Meta}.

Supported formats include: ESRI Shapefile (.shp), GeoPackage (.gpkg),
GeoJSON (.json, .geojson), FlatGeoBuf (.fgb), and others supported by GDAL.
}
\examples{
\dontrun{
library(duckspatial)

# Read shapefile - CRS auto-detected
nc <- ddbs_open_dataset(system.file("shape/nc.shp", package = "sf"))
print(nc)

# Read GeoJSON
countries <- ddbs_open_dataset(
  system.file("spatial/countries.geojson", package = "duckspatial")
)

# Use with duckspatial functions
result <- countries |>
  ddbs_buffer(distance = 0.1) |>
  ddbs_collect()
}
}
\seealso{
\code{\link{as_duckspatial_df}}, \code{\link{ddbs_collect}}
}
